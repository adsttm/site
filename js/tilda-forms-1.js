$(document).ready((function(){window.validateForm=function(r){var e=[];return r.find(".js-tilda-rule").each((function(){var r,t=$(this).data("tilda-req")||0,a=$(this).data("tilda-rule")||"none",i={},s=$(this).val(),o="";if(i.obj=$(this),i.type=[],s&&s.length>0&&(o=s.replace(/\s/g,"")),1==t&&0==s.length&&0==o.length)i.type.push("req");else switch(a){case"email":r=/^[a-zA-Z0-9_\.\-]{1,64}@[a-zA-Z0-9\.\-]{1,253}\.[a-zA-Z]{2,10}$/,s.length>0&&!s.match(r)&&i.type.push("email");break;case"phone":r=/^[0-9\(\)\-\+]+$/gi,o.length>0&&!o.match(r)&&i.type.push("phone")}i.type&&i.type.length>0&&(e[e.length]=i)})),e};var $jallforms=$(".r").find(".js-form-proccess[data-formactiontype]");$jallforms.length>0&&$jallforms.each((function(){2==$(this).data("formactiontype")&&$(this).append('<div style="position: absolute; left: -5000px;"><input type="text" name="form-spec-comments" value="Its good" class="js-form-spec-comments"  tabindex="-1" /></div>')})),$(".r").on("submit",".js-form-proccess",(function(event){$(this).find(".js-errorbox-all").hide(),$(this).find(".js-rule-error").hide(),$(this).find(".js-error-rule-all").html(""),$(this).find(".js-successbox").hide(),$(this).find(".js-error-control-box").removeClass("js-error-control-box"),$(this).removeClass("js-send-form-error"),$(this).removeClass("js-send-form-success");var arError=validateForm($(this)),$blockinput="";if(arError&&arError.length>0){var clsInputBoxSelector=$(this).data("inputbox");clsInputBoxSelector||(clsInputBoxSelector=".blockinput");for(var i=0;i<arError.length;i++)if(arError[i]&&arError[i].obj)for(arError[i].obj.closest(clsInputBoxSelector).addClass("js-error-control-box"),j=0;j<arError[i].type.length;j++){error=arError[i].type[j];var $errItem=$(this).find(".js-rule-error-"+error);$errItem.length>0&&$errItem.css("display","block").show()}return arError.length>0&&$(this).find(".js-errorbox-all").css("display","block").show(),!1}var $activeForm=$(this),formtype=$(this).data("formactiontype");if(2==formtype&&$(this).find(".js-formaction-services").length>0){var $btn=$(this).find("[type=submit]");return $btn.attr("disabled","disabled"),$(this).data("submitbtn",$btn),$(this).data("opacity",$btn.css("opacity")),$(this).find(".js-form-spec-comments").val(""),$btn.css("opacity","0.5"),$.ajax({type:"POST",url:"http://web.archive.org/web/20211230045813/https://forms.tildacdn.com/procces/",data:$(this).serialize(),dataType:"json",success:function(json){var $btn=$activeForm.data("submitbtn"),css=$activeForm.data("opacity"),successurl=$activeForm.data("success-url"),successcallback=$activeForm.data("success-callback");if(css?$btn.css("opacity",css):$btn.css("opacity","1"),$btn.removeAttr("disabled"),json&&json.error){successurl="",successcallback="";var $errBox=$activeForm.find(".js-errorbox-all");$errBox&&0!=$errBox.length||($activeForm.prepend('<div class="js-errorbox-all"></div>'),$errBox=$activeForm.find(".js-errorbox-all"));var $allError=$errBox.find(".js-rule-error-all");$allError&&0!=$allError.length||($errBox.append('<p class="js-rule-error-all">'+json.error+"</p>"),$allError=$errBox.find(".js-rule-error-all")),$allError.html(json.error).show(),$errBox.show(),$activeForm.addClass("js-send-form-error")}else{$activeForm.find(".js-successbox").show(),$activeForm.addClass("js-send-form-success");var virtPage="/tilda/"+$activeForm.attr("id")+"/submitted/",virtTtitle="Send data from form "+$activeForm.attr("id");"undefined"!=typeof ga&&ga&&("tilda"==window.mainTracker?ga("tilda.send",{hitType:"pageview",page:virtPage,title:virtTtitle}):ga("send",{hitType:"pageview",page:virtPage,title:virtTtitle})),window.mainMetrika>""&&window[window.mainMetrika]&&window[window.mainMetrika].hit(virtPage,{title:virtTtitle,referer:window.location.href}),window.dataLayer&&window.dataLayer.push({event:"submit_"+$activeForm.attr("id")}),successcallback&&successcallback.length>0?eval(successcallback+"($activeForm)"):successurl&&successurl.length>0&&(window.location.href=successurl),$activeForm.find("input[type=text]:visible").val(""),$activeForm.find("textarea:visible").html(""),$activeForm.find("textarea:visible").val("")}},error:function(r){var e=$activeForm.data("submitbtn"),t=$activeForm.data("opacity");t?e.css("opacity",t):e.css("opacity","1"),e.removeAttr("disabled");var a=$activeForm.find(".js-errorbox-all");a&&0!=a.length||($activeForm.prepend('<div class="js-errorbox-all"></div>'),a=$activeForm.find(".js-errorbox-all"));var i=a.find(".js-rule-error-all");i&&0!=i.length||(a.append('<p class="js-rule-error-all">Unknown error. Later, plaese try again.</p>'),i=a.find(".js-rule-error-all")),i.show(),a.show(),$activeForm.addClass("js-send-form-error")},timeout:15e3}),event.preventDefault(),!1}if("y"==$(this).data("is-formajax")){var $btn=$(this).find("[type=submit]");return $btn.attr("disabled","disabled"),$(this).data("submitbtn",$btn),$(this).data("opacity",$btn.css("opacity")),$btn.css("opacity","0.5"),$.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),dataType:"html",success:function(r){var e=$activeForm.data("submitbtn"),t=$activeForm.data("opacity"),a=$activeForm.data("success-url");t?e.css("opacity",t):e.css("opacity","1"),e.removeAttr("disabled"),r&&r.length>0&&$activeForm.find(".js-successbox").html(r),$activeForm.find(".js-successbox").show(),$activeForm.find("input[type=text]:visible").val(""),$activeForm.find("textarea:visible").html(""),$activeForm.find("textarea:visible").val(""),$activeForm.addClass("js-send-form-success");var i="/tilda/"+$activeForm.attr("id")+"/submitted/",s="Send data from form "+$activeForm.attr("id");"undefined"!=typeof ga&&("tilda"==window.mainTracker?ga("tilda.send",{hitType:"pageview",page:i,title:s}):ga("send",{hitType:"pageview",page:i,title:s})),window.mainMetrika>""&&window[window.mainMetrika]&&window[window.mainMetrika].hit(i,{title:s,referer:window.location.href}),a&&a.length>0&&(window.location.href=a)},error:function(r){var e=$activeForm.data("submitbtn"),t=$activeForm.data("opacity");t?e.css("opacity",t):e.css("opacity","1"),e.removeAttr("disabled");var a=$activeForm.find(".js-errorbox-all");a&&0!=a.length||($activeForm.prepend('<div class="js-errorbox-all"></div>'),a=$activeForm.find(".js-errorbox-all"));var i=a.find(".js-rule-error-all");i&&0!=i.length||(a.append('<p class="js-rule-error-all">Unknown error. Later, plaese try again.</p>'),i=a.find(".js-rule-error-all")),i.show(),a.show(),$activeForm.addClass("js-send-form-error")},timeout:15e3}),event.preventDefault(),!1}return!0}))}));